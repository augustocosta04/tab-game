<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>T√ÇB</title>
  <meta name="theme-color" content="#a57c25" />
  <meta name="description" content="T√ÇB ‚Äî jogo de tabuleiro em vers√£o web, inspirado no Antigo Egito." />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" />
</head>
<body class="theme-egypt">
  <noscript><p class="noscript">Este jogo precisa de JavaScript activo.</p></noscript>

  <!-- Cabe√ßalho -->
  <header class="site-header" role="banner">
    <div class="brand">
      <svg class="cartouche" viewBox="0 0 300 120" aria-hidden="true" focusable="false">
        <rect x="10" y="10" width="280" height="100" rx="40" ry="40"></rect>
        <circle cx="30" cy="60" r="6"></circle>
        <circle cx="270" cy="60" r="6"></circle>
      </svg>
      <h1 class="title" aria-label="T√ÇB">T√ÇB</h1>
      <span class="subtitle" aria-hidden="true">ìÇÄ ìÉ≠ ìÜ£ ìÉ£</span>
    </div>

    <!-- Identifica√ß√£o compacta -->
    <details class="id-compact" id="identificacao">
      <summary><span id="auth-label">Entrar</span></summary>
      <form id="form-auth" class="id-menu" autocomplete="off" novalidate>
        <label>
          <span>Utilizador</span>
          <input id="auth-user" name="user" type="text" inputmode="latin" />
        </label>
        <label>
          <span>Senha</span>
          <input id="auth-pass" name="pass" type="password" />
        </label>
        <div class="id-actions">
          <button id="btn-auth" type="button" class="cmd xs">Entrar</button>
          <button id="btn-auth-sair" type="button" class="cmd xs soft" hidden>Sair</button>
        </div>
        <p id="auth-status" class="muted" aria-live="polite">Sess√£o n√£o autenticada.</p>
      </form>
    </details>
  </header>

  <!-- Layout principal -->
  <main id="app" class="layout layout-tight" role="main">
    <!-- Tabuleiro -->
    <section class="board-wrapper" id="tabuleiro" aria-labelledby="board-title">
      <div class="board-header">
        <h2 id="board-title">Tabuleiro</h2>
        <div class="turno"><span>Vez de: </span><strong id="vez-jogador">‚Äì</strong></div>
      </div>

      <!-- Board com 4 linhas e 15 colunas renderizadas no HTML -->
      <div class="board cols-9" id="board" role="grid" aria-label="Tabuleiro T√ÇB">
        <!-- Linha 0 -->
        <div class="row" role="row" data-row="0">
          <div class="cell" role="gridcell" data-row="0" data-col="0"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="1"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="2"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="3"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="4"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="5"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="6"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="7"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="8"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="9"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="10"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="11"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="12"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="13"></div>
          <div class="cell" role="gridcell" data-row="0" data-col="14"></div>
        </div>

        <!-- Linha 1 -->
        <div class="row" role="row" data-row="1">
          <div class="cell" role="gridcell" data-row="1" data-col="0"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="1"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="2"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="3"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="4"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="5"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="6"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="7"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="8"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="9"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="10"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="11"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="12"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="13"></div>
          <div class="cell" role="gridcell" data-row="1" data-col="14"></div>
        </div>

        <!-- Linha 2 -->
        <div class="row" role="row" data-row="2">
          <div class="cell" role="gridcell" data-row="2" data-col="0"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="1"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="2"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="3"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="4"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="5"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="6"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="7"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="8"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="9"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="10"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="11"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="12"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="13"></div>
          <div class="cell" role="gridcell" data-row="2" data-col="14"></div>
        </div>

        <!-- Linha 3 -->
        <div class="row" role="row" data-row="3">
          <div class="cell" role="gridcell" data-row="3" data-col="0"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="1"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="2"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="3"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="4"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="5"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="6"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="7"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="8"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="9"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="10"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="11"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="12"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="13"></div>
          <div class="cell" role="gridcell" data-row="3" data-col="14"></div>
        </div>
      </div>

      <div class="legenda">
        <span class="chip chip-azul" aria-label="Pe√ßas azuis"></span> Azuis
        <span class="chip chip-vermelho" aria-label="Pe√ßas vermelhas"></span> Vermelhas
      </div>
    </section>

    <!-- HUD lateral -->
    <aside class="hud">
      <!-- Dado -->
      <section class="panel sticks" id="dado" aria-labelledby="dado-title">
        <h2 id="dado-title">Dado</h2>
        <div class="sticks-view" aria-live="polite" aria-atomic="true">
          <div class="stick" data-face="desconhecida"></div>
          <canvas id="sticks-canvas" width="160" height="90"></canvas>
          <div class="stick" data-face="desconhecida"></div>
          <div class="stick" data-face="desconhecida"></div>
          <div class="stick" data-face="desconhecida"></div>
        </div>
        <div class="roll">
          <button id="btn-lancar" type="button" class="cmd sm">Lan√ßar</button>
          <output id="valor-dado" aria-live="polite">‚Äì</output>
        </div>
      </section>

      <!-- Mensagens -->
      <section class="panel messages" id="mensagens">
        <h2>Mensagens</h2>
        <ul id="msg-list"></ul>
      </section>

      <!-- Comandos -->
      <nav class="panel commands">
        <div class="row">
          <button id="btn-iniciar" class="cmd" type="button">Iniciar</button>
          <button id="btn-passar" class="cmd" type="button" disabled>Passar</button>
          <button id="btn-desistir" class="cmd soft" type="button" disabled>Desistir</button>
        </div>
        <div class="row">
          <button id="btn-instrucoes" class="cmd ghost" type="button">Instru√ß√µes</button>
          <button id="btn-classificacoes" class="cmd ghost" type="button">Classifica√ß√µes</button>
        </div>
      </nav>

      <!-- Configura√ß√£o (sempre aberta agora) -->
      <section class="panel config" id="config">
        <h2>Configura√ß√£o</h2>
        <form id="form-config">
          <fieldset class="field radios" id="field-modo">
            <legend>Modo de Jogo</legend>
            <label><input type="radio" name="modo" value="local" checked /> vs Computador</label>
            <label><input type="radio" name="modo" value="online" /> vs Jogador Online</label>
          </fieldset>
          <label class="field">
            <span>Tamanho</span>
            <select id="sel-tamanho" name="tamanho">
              <option value="5">5 √ó 4</option>
              <option value="7">7 √ó 4</option>
              <option value="9" selected>9 √ó 4</option>
              <option value="11">11 √ó 4</option>
              <option value="13">13 √ó 4</option>
              <option value="15">15 √ó 4</option>
            </select>
          </label>
          <label class="field" id="field-grupo" hidden>
            <span>Grupo</span>
            <input type="number" id="sel-grupo" name="grupo" value="99" min="1" max="999" />
          </label>
          <label class="field" id="field-primeiro">
            <span>Primeiro a jogar</span>
            <select id="sel-primeiro" name="primeiro">
              <option value="azul" selected>Azuis</option>
              <option value="vermelho">Vermelhas</option>
              <option value="aleatorio">Aleat√≥rio</option>
            </select>
          </label>
          <fieldset class="field radios" id="field-nivel">
            <legend>N√≠vel da IA</legend>
            <label><input type="radio" name="nivel" value="easy" checked /> F√°cil</label>
            <label><input type="radio" name="nivel" value="medium" /> M√©dio</label>
            <label><input type="radio" name="nivel" value="hard" /> Dif√≠cil</label>
          </fieldset>
        </form>
      </section>
    </aside>
  </main>

  <!-- Di√°logo: Instru√ß√µes (√∫nico) -->
  <dialog id="dlg-instrucoes" aria-labelledby="instr-title">
    <form method="dialog">
      <header class="dialog-header">
        <h2 id="instr-title">Instru√ß√µes</h2>
      </header>

      <article class="dialog-body">
        <section style="display:grid;grid-template-columns:1fr;gap:.6rem;max-width:72ch">
          <div>
            <strong>Objetivo</strong><br>
            Eliminar todas as pe√ßas do advers√°rio.
          </div>

          <div>
            <strong>Tabuleiro e percurso</strong>
            <ul>
              <li>Tabuleiro com <b>4 linhas</b>; as colunas variam (7‚Äì15, sempre √≠mpar).</li>
              <li>Linhas <b>0</b> e <b>2</b> movem para a <b>esquerda</b>; linhas <b>1</b> e <b>3</b> movem para a <b>direita</b>.</li>
              <li>As setas nas casas s√£o apenas um <em>guia visual</em> de dire√ß√£o.</li>
            </ul>
          </div>

          <div>
            <strong>Dado de paus</strong>
            <ul>
              <li>Cada pau tem face <em>clara</em> (1) ou <em>escura</em> (0).</li>
              <li><b>Valor</b> = n√∫mero de faces claras (0,1,2,3,4). Se der 0, conta como <b>6</b>.</li>
              <li><b>Repete a vez</b> se tirar <b>1</b>, <b>4</b> ou <b>6</b>.</li>
              <li>Exemplos: 0‚Üí6 (repete) ‚Ä¢ 1‚Üí1 (repete) ‚Ä¢ 2‚Üí2 ‚Ä¢ 3‚Üí3 ‚Ä¢ 4‚Üí4 (repete).</li>
            </ul>
          </div>

          <div>
            <strong>Movimento</strong>
            <ul>
              <li>A pe√ßa avan√ßa exatamente <b>N</b> casas (N = valor do dado).</li>
              <li><b>Primeiro movimento de uma pe√ßa</b> s√≥ √© permitido com <b>1</b>.</li>
              <li>No caminho, voc√™ pode <b>atravessar</b> pe√ßas (aliadas ou inimigas). A restri√ß√£o vale apenas no <b>destino</b>.</li>
              <li><b>Terceira linha</b>: ao alcan√ß√°-la, pode escolher seguir para a <b>quarta</b> ou retornar para a <b>segunda</b>.</li>
              <li>Quando uma pe√ßa j√° esteve na <b>quarta linha</b> (fica ‚Äúaben√ßoada‚Äù), ela <b>n√£o pode voltar a entrar</b> nessa quarta linha.</li>
              <li>Pe√ßa na <b>√∫ltima linha do advers√°rio</b> s√≥ se move se <b>n√£o houver</b> pe√ßas suas na <b>linha inicial</b> (1¬™ linha do seu lado).</li>
              <li>√â <b>proibido pousar</b> na pr√≥pria <b>linha inicial</b> vindo de outra linha.</li>
              <li>O destino <b>n√£o pode</b> conter uma pe√ßa da mesma cor.</li>
            </ul>
          </div>

          <div>
            <strong>Captura</strong>
            <ul>
              <li>Se o destino tiver pe√ßa advers√°ria, ela √© <b>capturada</b> e removida do tabuleiro.</li>
            </ul>
          </div>

          <div>
            <strong>Passar a vez</strong>
            <ul>
              <li>Se o valor do dado <b>n√£o permitir nenhuma jogada v√°lida</b>, clique em <b>Passar</b>. O jogo n√£o passa automaticamente.</li>
            </ul>
          </div>

          <div>
            <strong>Estados das pe√ßas</strong>
            <ul>
              <li><b>Normal</b>: pe√ßa lisa.</li>
              <li><b>‚òâ Movida</b>: j√° se moveu pelo menos uma vez.</li>
              <li><b>‚ò• Aben√ßoada</b>: alcan√ßou a √∫ltima linha do advers√°rio; n√£o pode voltar a entrar nela.</li>
            </ul>
          </div>

          <div>
            <strong>Fim do jogo</strong>
            <ul>
              <li>O jogo termina quando um jogador <b>fica sem pe√ßas</b>.</li>
              <li><b>Desistir</b> encerra a partida e d√° vit√≥ria ao oponente.</li>
            </ul>
          </div>
        </section>
      </article>

      <footer class="dialog-footer" style="display:flex;justify-content:flex-end;gap:.5rem">
        <button value="close" class="cmd">Fechar</button>
      </footer>
    </form>
  </dialog>

  <!-- Di√°logo: Classifica√ß√µes -->
  <dialog id="dlg-classificacoes">
    <form method="dialog">
      <header class="dialog-header"><h2>Classifica√ß√µes</h2></header>
      <article class="dialog-body">
        <!-- ‚úÖ Resumo por tamanho (vit√≥rias/derrotas do jogador ‚Äî Azuis) -->
        <div id="ranking-resumo" style="margin-bottom:.8rem"></div>

        <table class="ranking" id="ranking">
          <thead>
            <tr><th>Data</th><th>Tamanho</th><th>Vencedor</th><th>Jogadas</th><th>Dura√ß√£o</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </article>
      <footer class="dialog-footer">
        <button id="btn-limpar-ranking" class="cmd" value="clear">Limpar</button>
        <button value="close" class="cmd">Fechar</button>
      </footer>
    </form>
  </dialog>

  <footer class="site-footer">
    <div class="frieze"><span>ìÜë</span><span>ìÜ£</span><span>ìÖì</span><span>ìÉ≠</span><span>ìÇÄ</span></div>
  </footer>

  <script type="module" src="js/main.js"></script>
</body>
</html>
